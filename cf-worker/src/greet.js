// –î–∞–≤—Ç–∞–º–∂ —Ö—è–Ω–∞—Ö—ã–Ω —Ç—É–ª–¥ —Ç“Ø—Ä —Å–∞–Ω–∞—Ö –æ–π
let callCount = 0;
let lastCallTime = 0;

export function greet(text) {
  const tr = text.toLowerCase().trim();

  // –∑”©–≤—Ö”©–Ω normalize-–¥ –æ—Ä–∂ –∏—Ä—Å—ç–Ω "—Ö”©”©–µ"-–≥ —à–∞–ª–≥–∞–Ω–∞
  if (tr === "—Ö”©”©–µ") {
    const now = Date.now();

    // —Ö—ç—Ä—ç–≤ 10 —Å–µ–∫—É–Ω–¥–∏–π–Ω –¥–æ—Ç–æ—Ä –¥–∞—Ö–∏–Ω –¥—É—É–¥–≤–∞–ª –¥–∞–≤—Ç–∞–º–∂ –Ω—ç–º—ç–≥–¥“Ø“Ø–ª–Ω—ç
    if (now - lastCallTime < 10000) {
      callCount++;
    } else {
      callCount = 1; // —à–∏–Ω—ç—ç—Ä —Ç–æ–æ–ª–æ–ª —ç—Ö–ª—ç—Ö
    }

    lastCallTime = now;

    // –æ–ª–æ–Ω —É–¥–∞–∞ –¥–∞—Ä–∞–∞–ª–∞–Ω –¥—É—É–¥–≤–∞–ª —Ç—É—Å–≥–∞–π —Ö–∞—Ä–∏—É ”©–≥”©—Ö
    if (callCount >= 4) {
      callCount = 0; // reset
      return "–ë—É—Ä—Ö–∞–Ω –º–∏–Ω—å, —è–º–∞—Ä –∞–π–º–∞—Ä —Ö“Ø–Ω –±—ç üò≥";
    }

    // —ç–Ω–≥–∏–π–Ω “Ø–µ–¥ random —Ö–∞—Ä–∏—É–ª—Ç—É—É–¥
    const replies = [
      "–Ø–∞–≤? üòè",
      "–Ø–∞—Å–∞–Ω? ü§®",
      "–Æ—É —Ö—ç—Ä—ç–≥—Ç—ç–π –±–æ–ª–æ–≤?",
      "–¢–∞–π–≤—à–∏—Ä. –Æ—É –±–æ–ª–æ–≤?",
      "–ê–π–Ω?",
      "–£—É—Ä—Ç–∞–π –±–∞–π–≥–∞–∞ —é–º —É—É? –Ø–∞—Å–∞–Ω?",
      "... ?"
    ];

    return replies[Math.floor(Math.random() * replies.length)];
  }

  return null;
}
